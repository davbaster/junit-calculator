# azure-pipelines.yml
trigger:
- main  # Triggers the pipeline on changes to the main branch

pool:
  vmImage: 'ubuntu-latest'  # Using Ubuntu as the build agent OS

steps:
- task: Maven@4  # Updated to Maven@4
  inputs:
    mavenPomFile: 'pom.xml'  # Path to your pom.xml file
    goals: 'clean install'    # Clean the target directory and build the project
    options: '-B'             # Run in batch mode without interactive input

- task: Maven@4  # Updated to Maven@4
  inputs:
    mavenPomFile: 'pom.xml'
    goals: 'test'             # Run the tests
    options: '-B'

- task: PublishTestResults@2
  inputs:
    testResultsFiles: '**/TEST-*.xml'  # Publish the JUnit test results
    testRunTitle: 'Calculator Unit Tests'
    mergeTestResults: true
